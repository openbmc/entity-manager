{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "190acd88_c06b170b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-02T19:52:02Z",
      "side": 1,
      "message": "Why not?  There is a single i2c bus coming off the HMC board for both the EEPROM and the SMBPBI interface.  The SMBPBI address is specified by the HMC itself.  I\u0027m pretty sure that whatever bus/address we use to find the EEPROM is also the same bus for the SMBPBI.  Therefore, we should be able to make at least the basic SMBPBI information common across all users of the board.",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 66
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49082906_acb937c6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-02T19:59:02Z",
      "side": 1,
      "message": "Hmmmmm ok, I mean I\u0027m happy to add this to nvidia_hmc.json, I just wouldn\u0027t guarantee that it will work for the next user that comes along.\n\nCompare this specification in the downstream Nvidia repository:\n\nhttps://github.com/NVIDIA/openbmc/blob/0a389de055e3b08110ac6bb9c80e653873fd2889/meta-nvidia/meta-prime/meta-graceblackwell/meta-gb200nvl/meta-bmc/recipes-phosphor/configuration/entity-manager/files/HMC.json#L5-L6\n\n```\n                \"Address\": \"0x4f\",\n                \"Bus\": 2,\n```\n\nAnd then the address and bus from a live Catalina BMC:\n\n```\nxyz.openbmc_project.Configuration.Satellite interface -         -                          -\n.Address                                    property  t         79                         emits-change\n.Bus                                        property  t         13                         emits-change\n```\n\nSo, yes you\u0027re correct about the address, but what about the bus, that\u0027s different right? That part\ndepends on which bus we connect the HMC board to on the BMC part.",
      "parentUuid": "190acd88_c06b170b",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 66
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2880c87f_30c22318",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-02T21:33:59Z",
      "side": 1,
      "message": "oh wait, I didn’t read your comment carefully enough, yeah I think you’re correct, the fru eeprom should be on the same bus. let me check that again, if that’s the case then yeah I’ll just move this to nvidia_hmc.json.",
      "parentUuid": "49082906_acb937c6",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 66
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc918acb_8692abd4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-02T21:59:12Z",
      "side": 1,
      "message": "Yeah ok, confirmed it\u0027s the same bus. I\u0027ll redo this\n\n```\nxyz.openbmc_project.FruDevice       interface -         -                    -\n.ADDRESS                            property  u         87                     emits-change\n.BOARD_LANGUAGE_CODE                property  s         \"25\"                 emits-change    emits-change\n.BUS                                property  u         13                   emits-change\n```",
      "parentUuid": "2880c87f_30c22318",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 66
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1f641448_10fd63d7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-03T06:28:02Z",
      "side": 1,
      "message": "Ok: I moved the configuration object to nvidia_hmc.json, and I\u0027m using the \"$bus\" from the HMC FRU EEPROM.",
      "parentUuid": "bc918acb_8692abd4",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 66
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "112c31e6_b6cdfafe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-02T19:52:02Z",
      "side": 1,
      "message": "(I wrote about this later, but this is the problematic aspect of what you\u0027ve done.)",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "500504f8_445e2ff2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-03T06:28:02Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "112c31e6_b6cdfafe",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e8c5710_85d90187",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-02T19:52:02Z",
      "side": 1,
      "message": "This isn\u0027t a separate FRU from the \"real\" HMC.  What you\u0027ve done here will create two separate inventory objects (in entity-manager) which will show up as two different FRUs in EM (and eventually in Redfish).  This isn\u0027t what we want.",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "127a0ca6_49011c43",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-02T20:02:52Z",
      "side": 1,
      "message": "Well, to be clear, this configuration file will not create 2 different FRUs, it will create 1. But because there is another configuration file that matches on the HMC FRU (nvidia_hmc.json), it will also create an object. That was actually my intent.\n\nThe reason I was doing this is because the bus address varies depending on the SCM part, so I was trying to make a config object that will provide this additional SMBPBI information, separate from the core HMC information (that provides the IP address).\n\nI also don\u0027t like the fact that it\u0027s a separate object, but I\u0027m not sure how else to add Catalina-specific information about the HMC. I could add it to the SCM object, if that would be preferable, and remove the HMC condition?",
      "parentUuid": "9e8c5710_85d90187",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd0767a5_bd5a6c92",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2024-12-03T00:09:02Z",
      "side": 1,
      "message": "\u003e That was actually my intent.\n\nThis will produce an incorrect dbus and Redfish tree.  We shouldn\u0027t have a single fru represented twice.\n\n\u003e make a config object \n\nAdding a new exposes record would be your path to do that, not making a completely new file.\n\nAdd your new stanza to the existing HMC config file.",
      "parentUuid": "127a0ca6_49011c43",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15f15b13_f3d73008",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-03T06:28:02Z",
      "side": 1,
      "message": "Got it, moved the config object to nvidia_hmc.json, now the SMBPBI device shows up under the HMC object path.\n\nI took the liberty of refactoring the object structure in this change significantly, after learning a little more about the schemas.",
      "parentUuid": "dd0767a5_bd5a6c92",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b8d721f_3bb91611",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-11T17:03:50Z",
      "side": 1,
      "message": "Hey Ed, I moved the configuration to the nvidia_hmc.json configuration file, is this issue resolved?",
      "parentUuid": "15f15b13_f3d73008",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "862ffa7d_38bdc420",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-11T20:35:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b8d721f_3bb91611",
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31ce0b71_fb63faeb",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 40,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2024-12-02T19:52:02Z",
      "side": 1,
      "message": "We explicitly used this before:\n\n```\n    \"Probe\": \"xyz.openbmc_project.FruDevice({\u0027BOARD_PRODUCT_NAME\u0027: \u0027P4764\u0027, \u0027BOARD_MANUFACTURER\u0027: \u0027NVIDIA\u0027})\",\n```\n\nIf you just do \"Product Name\" you don\u0027t know which version of the HMC it is, so you can end up having the wrong config loaded anyhow.",
      "range": {
        "startLine": 40,
        "startChar": 74,
        "endLine": 40,
        "endChar": 106
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0136b2f9_b0e8db06",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 40,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-02T20:02:52Z",
      "side": 1,
      "message": "Oh ok, yeah I saw that the real version is using the name explicitly but it seemed like overkill to be that specific. It\u0027s also not as obvious when reading the inventory busctl output to tell what it\u0027s supposed to be.",
      "parentUuid": "31ce0b71_fb63faeb",
      "range": {
        "startLine": 40,
        "startChar": 74,
        "endLine": 40,
        "endChar": 106
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dda26cb1_b63f0761",
        "filename": "configurations/catalina_hmc.json",
        "patchSetId": 5
      },
      "lineNbr": 40,
      "author": {
        "id": 1001289
      },
      "writtenOn": "2024-12-03T06:28:02Z",
      "side": 1,
      "message": "Fixed, just using the Probe condition already present in nvidia_hmc.json now.",
      "parentUuid": "0136b2f9_b0e8db06",
      "range": {
        "startLine": 40,
        "startChar": 74,
        "endLine": 40,
        "endChar": 106
      },
      "revId": "9549b64ac175953123dfd406de9dfc4218b682a3",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}