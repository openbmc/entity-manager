#!/bin/bash
set -e

# When called from openbmc-build-scripts, the `pwd` could be anywhere, but
# the root of the repo is passed in the first argument.  Switch to the repo
# root so npm/git run in the right place.
if [ -n "$1" ]; then
    cd "$1"
else
    # This script is in the root of the repo so we can use it to find the root.
    cd "$(dirname "${BASH_SOURCE[0]}")"
fi
python3 scripts/autojson.py configurations
python3 scripts/autojson.py platform_configurations
scripts/generate_config_list.sh
scripts/generate_schema_list.sh
