{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a04e408f_0fb39bd7",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000733
      },
      "writtenOn": "2022-02-15T01:00:16Z",
      "side": 1,
      "message": "This seems out of place here -- the increased PollRate is due to the system I\u0027ve got these in being unable to keep up with the default 1-second poll interval that psusensor uses, but that seems more like a property of the system itself rather than this specific PSU.\n\nThe most natural solution seems like some configuration for psusensor itself (as opposed to the devices it monitors) to set its default poll interval, but I\u0027m not sure what the appropriate mechanism for that would be -- would a simple command-line flag do?",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce757715_28e1f394",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-02-24T04:08:25Z",
      "side": 1,
      "message": "IMO, how I imagined this when dbus-sensors didn\u0027t even have a name yet, is we would dynamically, per-system, determine appropriate poll rates at runtime that optimized our bus usage until we took it to the tipping point, then back it off by 10%, so as a general rule, we would poll all sensors as fast as possible.\n\nUnfortunately, that\u0027s not how history played out, and people wanted explicit control of poll rate.  I still think there\u0027s some kind of \"auto\" mode that we could come up with that would be the default, and would remove the need for explicitly putting this here.\n\n\nWith that said, you\u0027re right, this isn\u0027t a property of the PSU, but it\u0027s what we have today.\n\nThe chassis or the baseboard in specific instances can use DisableNode to provide a different set of parameters here.",
      "parentUuid": "a04e408f_0fb39bd7",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8be8c555_f12bb025",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000733
      },
      "writtenOn": "2022-02-15T01:00:16Z",
      "side": 1,
      "message": "This naming isn\u0027t ideal -- `$index` seems like the \"appropriate\" thing to use here, but there doesn\u0027t seem to be any guarantee on the order those index numbers get assigned.  The PSUs themselves live in slots numbered 1 through 6 (which are the numbers I\u0027d prefer this to use), so I\u0027ve used `$bus` here instead to at least get the naming consistent, since each slot has a bus dedicated to it; ideally there\u0027d be some way to statically express that mapping such that the one on bus X would always be named \"PSU Y\", but I don\u0027t know of any existing way to achieve that.",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b592c35a_eaef720a",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000733
      },
      "writtenOn": "2022-02-15T01:03:31Z",
      "side": 1,
      "message": "Though I suppose that in turn is also a bit outside the scope of the PSU itself and more an aspect of the chassis -- mostly just wondering if anyone has any input on the \"right\" way to approach this.",
      "parentUuid": "8be8c555_f12bb025",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f198c959_ccf56df4",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000733
      },
      "writtenOn": "2022-02-24T03:22:22Z",
      "side": 1,
      "message": "Hmm, I see the IBM Nisqually and Bellavista configs have statically-numbered IBMCFFPSConnector instances for the chassis-level PSU slots, which looks like it\u0027d solve essentially this problem, but I don\u0027t see any existing non-CFFPS PSU connector types currently defined -- would adding a generic PSUConnector schema be the way to go here?",
      "parentUuid": "b592c35a_eaef720a",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34757935_3c9ef4d8",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-02-24T04:08:25Z",
      "side": 1,
      "message": "The intent is that the name is essentially just the dbus path, and the actual numbering, while might matter to humans, doesn\u0027t matter to computers.  For the systems we worked on, all the power supplies were on a common bus with different addresses, so the common mechanism was to use the address (and a math expression) to determine the index of the PSU.  In your case it looks like you have a mux, or separate channels, so we\u0027ll have to add support for that.\n\n\u003e would adding a generic PSUConnector schema be the way to go here?\n\nProbably.  Ideally we\u0027d follow the same pattern as the fan connector stuff to at least make it similar.\n\nZhikiu was working on a similar problem, you might want to talk to her and see if there\u0027s some commonality there.",
      "parentUuid": "f198c959_ccf56df4",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dfc0367_4be069ee",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-01T00:07:55Z",
      "side": 1,
      "message": "Can we check this file in with $index for the moment (to get this review moving) then we can regroup in another patch and figure out how to get the behavior you need?",
      "parentUuid": "34757935_3c9ef4d8",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf51eb16_d34e4c60",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1001252
      },
      "writtenOn": "2022-03-01T12:57:48Z",
      "side": 1,
      "message": "A possible workaround is to copy the configuration for 6 times, and for each one, add a fixed ‘BUS’ in the probe rule. For example, if your PSU1 is on i2c-11.\n\n  \"Name\": \"Delta AWF2DC3200W PSU 1\",\n  \"Probe\": \"xyz.openbmc_project.FruDevice({\u0027PRODUCT_PRODUCT_NAME\u0027: \u0027AWF2DC3200W\u0027, \u0027BUS\u0027: 11})\",\n\nThe \"F2U8x25 HSBP.json\" also uses this way. https://github.com/openbmc/entity-manager/blob/master/configurations/F2U8X25%20HSBP.json Seems it is the only possible solution for your use case for now, though it is not clean :(",
      "parentUuid": "5dfc0367_4be069ee",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62b05048_430b264a",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000733
      },
      "writtenOn": "2022-03-02T02:19:04Z",
      "side": 1,
      "message": "Ah...yeah, I suppose that could work, though I think I\u0027ll avoid the duplication and just use `$index` for now as Ed suggested, and then hopefully try to rig up some connector-style mechanism to number the slots in a separate chassis configuration independently of the PSUs themselves.",
      "parentUuid": "bf51eb16_d34e4c60",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b421c5f9_2f6f2fb5",
        "filename": "configurations/Delta_AWF2DC3200W_PSU.json",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-02T03:48:47Z",
      "side": 1,
      "message": "Lets start with index, then lets continue this discussion on another patchset trying to switch it to $bus, and we can discuss more how to proceed.",
      "parentUuid": "62b05048_430b264a",
      "revId": "788c6404367d052bdabf24a5f91a435b854e9b11",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}