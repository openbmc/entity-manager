{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "73c43891_f885e04d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-09-25T20:34:19Z",
      "side": 1,
      "message": "This seems to conflict with https://gerrit.openbmc.org/c/openbmc/entity-manager/+/82560 which was already moving some of the names to direct properties.  Is that a better approach?",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "292a1408_cc1fc390",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-09-26T09:29:02Z",
      "side": 1,
      "message": "The linked patch does not get rid of `patternProperties`. I do not want to block 82560 because of my work here so i guess it can go first since it\u0027s been up for some time.\n\nAnd 82560\u0027s related patch\nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/82559\nhas been pending for more than a month already without a single comment from dbus-sensors maintainers.\n\nI am not sure if the \u0027temp\u0027 sensors are structured enough to allow dropping the names array thing. Since apparently there are now also pressure and humidity sensors managed by that reactor.\n\nFor the case of a chip exposing multiple temperature sensors we may still need some kind of array to find a `Name` for all of them.\n\nSo i guess my patch here can be considered separately from 82560.\n\nResolving this comment since the linked patch does not fix my issue.",
      "parentUuid": "73c43891_f885e04d",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4187030f_4c5ac36c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-09-26T10:42:07Z",
      "side": 1,
      "message": "Should we rebase on it?",
      "parentUuid": "292a1408_cc1fc390",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "797768fd_7c9a5892",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-09-26T11:46:47Z",
      "side": 1,
      "message": "\u003e Should we rebase on it?\n\nMy patch does not depend on it. What do we gain by rebasing.\n\nIt\u0027s not like review will magically speed up overnight and merge both patches in a short time (in which case rebasing would make sense to avoid extra revisions due to conflicts)\n\nConsider we have not a single comment or indication from dbus-sensors maintainers\nif Naresh\u0027s patch is good to go. If i rebased my patch and they found problems with 82559 then my patch gets delayed or not reviewed at all.",
      "parentUuid": "4187030f_4c5ac36c",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15472864_3ce70515",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-09-29T12:03:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "797768fd_7c9a5892",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9da4ac1_8103b98a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-02T05:18:37Z",
      "side": 1,
      "message": "Not interested in breaking changes to the json format here.  These files are used in a lot of places, and causing this level of thrash by breaking all in-process files and everyones forks doesn\u0027t seem worth it for this minor of a change.",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d58a910_cc3781a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-02T08:41:10Z",
      "side": 1,
      "message": "\u003e by breaking all in-process files\n\nDo you mean pending gerrit changes? If so, that\u0027s a normal part of development,\nchanges can be conflicting and one might need to rebase their patches if something else gets merged.\n\nIf that\u0027s what you mean i am not sure it counts as valid argument because you can say that about most gerrit changes. They usually have a (merge) conflict with another change.\n\n\u003e Not interested in breaking changes \n\nCan you further explain what is breaking about this change.\n\nThe dbus-sensors will still be able to consume the old-style config for TempSensor.\n\nOr do you mean that the config validation will fail for downstream configs?",
      "parentUuid": "e9da4ac1_8103b98a",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c9d7272_96b17150",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-11-26T15:13:45Z",
      "side": 1,
      "message": "@ed@tanous.net - I don‚Äôt understand your claim here. We can never do refactoring because it might make other people who have downstream, uncontributed, changes do work?  When has this ever been a consideration??!\n\nThe existing entity-manager implementation violates dbus expectations all the time and Alexander is trying to improve that. Why would we turn that down?\n\nIf we‚Äôre saying we can never fix entity-manager and dbus-sensors to actually conform to modern dbus expectations because‚Ä¶ ‚Äúpoor code already exists‚Äù, then frankly it‚Äôs time to fork those two repositories. I‚Äôm getting really frustrated with it being a fight for every improvement we want to do in these two repositories.",
      "parentUuid": "8d58a910_cc3781a8",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9a9f95e_5529f523",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2026-01-21T00:06:32Z",
      "side": 1,
      "message": "Cherry-picking an example from elsewhere in the open source ecosystem: While Linux\u0027s syscall interface has a no-regressions policy, the internal APIs are never considered stable. There are two motivations for that:\n\n1. Ensuring that upstream developers can refactor the implementation as needs shift over time\n2. To encourage contributions upstream by adding friction to keeping patches out-of-tree\n\nI see parallels here. OpenBMC\u0027s equivalent of Linux\u0027s syscall interface is Redfish and IPMI. Anything else should be fair game, with the same motivations as Linux.\n\nRegardless, in this case, we can provide a transitional period by implementing both approaches in the schema, the dropping `patternProperties` some time in the future. I use the overlap strategy extensively in libpldm to allow non-breaking progress.",
      "parentUuid": "0c9d7272_96b17150",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2bf279a0_2a07db03",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2026-01-21T02:39:35Z",
      "side": 1,
      "message": "Thanks for taking the time to review üëç\n\n\u003e the internal APIs are never considered stable.\n\nIMO this is also the documented design intent of entity-manager (see `CONFIG_FORMAT.md`, committed in 21608383661285e63e97c0457f55817f6e1d6b92)\n\n```\n+3. Configuration files are not a long-term stable ABI.  Why?\n+    - Configuration files occasionally need to modify their schema in pursuit of\n+      simplicity, or based on a greater understanding of the system level\n+      constraints.\n+    - The repo will ensure that all schema changes are enacted such that the\n+      files in the repo will not be broken as a result of the schema change, and\n+      will be carried forward.  The recommended way to avoid merge problems is\n+      to upstream your configurations.\n+    - Note: This drives the requirement that config files shall not be checked\n+      into OpenBMC meta layers.\n```\n\n\u003e Regardless, in this case, we can provide a transitional period by implementing both approaches in the schema, the dropping patternProperties some time in the future. I use the overlap strategy extensively in libpldm to allow non-breaking progress.\n\nI am wondering how this improves things for downstream users. No one needs \u0027time to migrate\u0027 here, it is a trivial change which is easily automated.\n\nAnyone who wants their configurations taken care of without having to lift a finger can simply upstream them.\n\nMy intent was to make this the least breaking change possible which is why in my corresponding dbus-sensors change (see topic) the reactor still accepts the old-style configuration.\n\n\u003e  I use the overlap strategy extensively in libpldm to allow non-breaking progress.\n\nIMO the progress here is removing a bad example of how not to write a config schema. The new way of using `ExtraNames` is not much better for performance, and it also does not enable any new use-cases or fix any user-visible bugs.\n\nIt is simply an effort to change EM to eventually be compatible with D-Bus and it\u0027s design intent.\n\nIMO this falls under the documented design intent of\n```\n+    - Configuration files occasionally need to modify their schema in pursuit of\n+      simplicity, or based on a greater understanding of the system level\n+      constraints.\n```\nsince our system-level constraint is that we are using D-Bus, so we need to adapt to D-Bus design intent and available tooling.",
      "parentUuid": "c9a9f95e_5529f523",
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38fb428c_a8c56a74",
        "filename": "schemas/legacy.json",
        "patchSetId": 1
      },
      "lineNbr": 654,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-09-26T10:42:07Z",
      "side": 1,
      "message": "Can we make the Name or Names a OneOf in the schema?  I don\u0027t really like that you have a name plus an optional array of extra ones.  I think we should either use an array or a singleton.",
      "range": {
        "startLine": 646,
        "startChar": 1,
        "endLine": 654,
        "endChar": 18
      },
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e373978f_3d1fc768",
        "filename": "schemas/legacy.json",
        "patchSetId": 1
      },
      "lineNbr": 654,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-09-26T11:46:47Z",
      "side": 1,
      "message": "`Name` is required as per `schemas/exposes_record.json`\n\n```\n  \"EMExposesElement\": {\n            \"description\": \"The exposes property element schema.  An element of the exposes property is always an array where elements are of type exposes entry.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/$defs/ConfigSchema\"\n                },\n                {\n                    \"title\": \"Missing \u0027Name\u0027\",\n                    \"description\": \"Ensure the schema does not validate when an element does not define a Name\",\n                    \"required\": [\"Name\"]\n                },\n                {\n                    \"title\": \"Missing \u0027Type\u0027\",\n                    \"description\": \"Ensure the schema does not validate when an element does not define a Type\",\n                    \"required\": [\"Type\"]\n                }\n            ],\n            \"title\": \"Exposes Property Element\"\n        }\n```\n\nSo we cannot get rid of `Name` without having a much bigger discussion.\nSince `Name` is how EM forms the leaf on the object path.\n\nCan we go with `ExtraNames` instead?",
      "parentUuid": "38fb428c_a8c56a74",
      "range": {
        "startLine": 646,
        "startChar": 1,
        "endLine": 654,
        "endChar": 18
      },
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43fce7b8_b1e0a809",
        "filename": "schemas/legacy.json",
        "patchSetId": 1
      },
      "lineNbr": 654,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-09-29T12:03:16Z",
      "side": 1,
      "message": "ping for reply on this discussion",
      "parentUuid": "e373978f_3d1fc768",
      "range": {
        "startLine": 646,
        "startChar": 1,
        "endLine": 654,
        "endChar": 18
      },
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13315bc4_766ddbdf",
        "filename": "schemas/legacy.json",
        "patchSetId": 1
      },
      "lineNbr": 654,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-10-01T21:18:45Z",
      "side": 1,
      "message": "I agree having just Name and Names together is a bit confusing, so ExtraNames makes sense to me.",
      "parentUuid": "43fce7b8_b1e0a809",
      "range": {
        "startLine": 646,
        "startChar": 1,
        "endLine": 654,
        "endChar": 18
      },
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "39e75296_fb3f3e39",
        "filename": "schemas/legacy.json",
        "patchSetId": 1
      },
      "lineNbr": 654,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-02T08:41:10Z",
      "side": 1,
      "message": "Changed it to `ExtraNames`",
      "parentUuid": "13315bc4_766ddbdf",
      "range": {
        "startLine": 646,
        "startChar": 1,
        "endLine": 654,
        "endChar": 18
      },
      "revId": "c22fc3b2a404086a51cdc79860be2ce02ca75ea0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}