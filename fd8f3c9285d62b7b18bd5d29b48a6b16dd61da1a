{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f559cfb7_f54d307d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 30
      },
      "lineNbr": 11,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2022-03-28T22:54:29Z",
      "side": 1,
      "message": "Have you done an analysis on what functions would be common between the (current) FruDevice and ipmb-fru? I expect the physical layer would be the difference. Some of the changes in this patch seems a bit surprising. Do you have a design doc to outline commonality and differences between the two services? That will be helpful for reviewing these changes. \n\nI did not read through all the comments for the past 30 patches. Sorry if it was already discussed.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 68
      },
      "revId": "fd8f3c9285d62b7b18bd5d29b48a6b16dd61da1a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1a1ce3d0_95dbf894",
        "filename": "/COMMIT_MSG",
        "patchSetId": 30
      },
      "lineNbr": 11,
      "author": {
        "id": 1000546
      },
      "writtenOn": "2022-03-29T08:40:01Z",
      "side": 1,
      "message": "Yes. Physical layer is difference in Fru-Device and ipmb-fru device. But the common functionalities between these two services are FRU format, handling, display the details in dbus. So, we need to move the common functions to FruUtils.cpp to reuse the existing code in ipmb-fru and avoid code duplication.\n\nThe functions related to FRU are \"decodeFRUData\", \"formatFRU\", \"validateHeader\" and getFRUInfo etc.\n\nThese functions already moved to FruUtils.cpp.\nhttps://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/39592.\nhttps://gerrit.openbmc-project.xyz/c/openbmc/entity-manager/+/50921\n\nOther major common functions are \"addFruObjectToDbus\", \"updateFRUProperty\" needs to be moved to FruUtils.cpp for code reusability in ipmb-fru and avoid code duplication. \nIn this patch, moved these two functions to FruUtils.cpp. To avoid CI issue in test_fru_utils, moved main function to FruDeviceMain.cpp file.\n\nWe don\u0027t have the design doc. Already discussed about ipmb-fru implementation and code move in the mailing list earlier. We have followed the ipmb spec for this implementation.",
      "parentUuid": "f559cfb7_f54d307d",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 68
      },
      "revId": "fd8f3c9285d62b7b18bd5d29b48a6b16dd61da1a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5bcb18a0_8c7c771b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 30
      },
      "lineNbr": 0,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2022-03-28T22:37:35Z",
      "side": 1,
      "message": "Add FruDeviceMain is not mentioned in the commit message. Is it meant to be part of this change? ",
      "revId": "fd8f3c9285d62b7b18bd5d29b48a6b16dd61da1a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9912b8b7_71814ccb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 30
      },
      "lineNbr": 0,
      "author": {
        "id": 1000546
      },
      "writtenOn": "2022-03-29T08:40:01Z",
      "side": 1,
      "message": "FruDeviceMain.cpp is also part of this change. While moving these functions to FruUtils.cpp, some CI issue occurs in test_fru_utils because of FruDevice.cpp file added with main function to test_fru_utils.  So, I seperated main function with new file \"FruDeviceMain.cpp\" as refactoring. There is no logic change. Just refactoring with moving main function to \"FruDeviceMain.cpp\" file. I will update the commit message.",
      "parentUuid": "5bcb18a0_8c7c771b",
      "revId": "fd8f3c9285d62b7b18bd5d29b48a6b16dd61da1a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}