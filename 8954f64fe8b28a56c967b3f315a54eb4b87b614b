{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "96ce1c57_659ff778",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-07-29T21:26:56Z",
      "side": 1,
      "message": "Could you add some output of what the associations made are?  For some reason I was under the impression that the fansensor app held the inventory interfaces for fans and not EM.",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "195d03be_2d320046",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-07-29T21:39:10Z",
      "side": 1,
      "message": "You are correct -- this change goes with some tweaks to how FanSensor handles inventory item associations. That PR has not been pushed yet, but will soon -- likely tomorrow.\n\nI still have more cleanup to do across a few PRs I got started on gerrit today, but I\u0027ll aim to update the commit message with a \"TESTED\u0027 section showing how things look in object mapper with a set of these associations in play.",
      "parentUuid": "96ce1c57_659ff778",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ba1fe90_33f61cda",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2025-10-16T05:26:30Z",
      "side": 1,
      "message": "What is your timeline to fill the TESTED section?",
      "parentUuid": "195d03be_2d320046",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a10efd69_e8be6565",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-10-18T20:38:55Z",
      "side": 1,
      "message": "Ah, I totally forgot about that bit in the commit message.\n\nI ran into some local build machine issues Friday, but I\u0027ll give it another go this next week and update with a copy/pate of some dbus tree data showing the cooling/cooled_by associations in action.",
      "parentUuid": "7ba1fe90_33f61cda",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe3a1f2f_7dbd390e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-10-21T22:06:57Z",
      "side": 1,
      "message": "Got things working again, TESTED section added. I\u0027ll give this another look tomorrow to fix the merge conflict.\n\nDo folks want to see more specific details than what I added already?",
      "parentUuid": "a10efd69_e8be6565",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "923234d1_f9691261",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-23T08:38:34Z",
      "side": 1,
      "message": "\u003e Do folks want to see more specific details than what I added already?\n\nCommit message could be expanded to go into more detail as to the fan inventory.\n\nI could be wrong here but i feel like that\u0027s one of the remaining points to be resolved.\n\nIf EM can have a fan inventory with `cooling` / `cooled_by`, where does that leave Fan sensor daemon?\n\nI grepped through dbus-sensors and could not find `cooling` / `cooled_by` in there.\n\nIt looks like you have a patch for that\nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/82436\n\nso it would be good to have that linked in the commit message.\n\nIt would be nice if we do not end up in a situation where the fan inventory is held by EM for some boards and then held by fan sensor on other boards. Maybe it could be done but discussing these tradeoffs can be part of a commit message.\n\nSuch an implementation may lead to code drift. If someone needs to add another association to a fan inventory item or another property to it\u0027s interface then that would need to be done in 2 repositories.\n\nmeta uses `Type: Board` for a fanboard \nhttps://github.com/openbmc/entity-manager/blob/master/configurations/meta/yv4/fanboard/yosemite4_fanboard_fsc_max_adc_ti_led_nxp_ons_efuse_max.json\n\nso having a `Type: Board` config with the `cooling` port/association record and having the fans simply copy that would be a way to avoid these issues.\n\nSo conceptually the `Board` is `cooling` some other item (e.g. chassis) and there are fan(s) on that board. fan sensor can then go and look at the association defined for the board and copy that to create the same association on the fan inventory item.\n\nNow if the `Board` in question actually exists or if it\u0027s just the fan is more of a conceptual question to me and should not make a difference to the implementation.\n\nThe issue with that idea is that we would be creating a `cooling` association on a `Board` inventory item.\n\nHowever i feel like creating such an association is less of a problem than distributing a specific inventory across multiple services.\n\nI assume there is some reason for fan sensor to hold the fan inventory. It can go via hwmon to figure out if the fan in question is actually there (tach input / pwm output), so it has some role in device detection / initialization.\n\nLet me know what you think of these ideas, i may be wrong since i don\u0027t know much about the design intent behind who\u0027s holding which inventory.",
      "parentUuid": "fe3a1f2f_7dbd390e",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b591c8a9_9d4404a4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-10-23T20:33:45Z",
      "side": 1,
      "message": "\u003eI could be wrong here but i feel like that\u0027s one of the remaining points to be resolved.\n\nI agree. \n\nSo far, the current method has been the only way I\u0027ve managed to get any fan items to show up in redfish/bmcweb\u0027s Fan Inventory, but we\u0027re not tied to that solution.\n\nI still have more experimenting and digging around to do to figure out why adding an Inventory.Item.Fan interface to fan paths on the xyz.openbmc_project.FanSensors dbus wasn\u0027t enough to get them picked up like I initially thought it would. \n\nI figured if we accepted this code as it is today, we\u0027d end up doing a later pass later to reconcile and \u0027nice up\u0027 how Fan Inventory is handled.\n\nWith a bit of guidance, I\u0027m happy to get it figured out now. \n\nI hadn\u0027t seen that fan \u0027board\u0027 example -- that\u0027s useful for my understanding. \n\nI\u0027m not fundamentally against having a \"fan board\" and keeping the fan Inventory.Item stuff under xyz.openbmc_project.FanSensors. I\u0027ll do some thinking and experimenting and come back to this.\n\nThanks a ton for the in-depth writeup!",
      "parentUuid": "923234d1_f9691261",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "586008d7_356a4299",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-07-29T21:26:56Z",
      "side": 1,
      "message": "Could you also update https://github.com/openbmc/entity-manager/blob/master/docs/associations.md that documents which associations EM can create itself?",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e79b70e_021b9acc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-07-29T21:28:02Z",
      "side": 1,
      "message": "This update goes with an update to the dbus-sensors/FanSensor daemon to add the appropriate associations for each fan discovered.\n\nThe FanSensor change is needed for redfish-core to pickup fans exposed this way.\n\nThere will also be some example Entity-Manager code uploaded for discussion (those PRs pending)",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05f96426_e799de3c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-07-29T21:30:01Z",
      "side": 1,
      "message": "*a working entity-manager config example",
      "parentUuid": "7e79b70e_021b9acc",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b685983f_801c9046",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-07-29T21:39:10Z",
      "side": 1,
      "message": "Definitely.",
      "parentUuid": "586008d7_356a4299",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3047644_79053121",
        "filename": "src/entity_manager/topology.cpp",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-07-30T10:13:46Z",
      "side": 1,
      "message": "nit:  can we inline it like this:\n```\nif (exposesItem.find(\"FanPort\") !\u003d exposesItem.end())\n{\n    fanPaths.insert(path);\n}\n```",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "442b80b0_21245582",
        "filename": "src/entity_manager/topology.cpp",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-07-30T21:56:17Z",
      "side": 1,
      "message": "Solid suggestion. Accepted.",
      "parentUuid": "e3047644_79053121",
      "revId": "8954f64fe8b28a56c967b3f315a54eb4b87b614b",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}